====================================================================================================
Binary operators
====================================================================================================
----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 10
    
    + (this + n:Int32):Int32 {
        = a + n
    }

    + (this + n:Thing):Double {
        = a + n.a
    }
}

+ main() {
    thing = Thing()
    -- thing + 1
    -- thing + thing
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

11
20.000000

====================================================================================================
Incremental assignment operators.
====================================================================================================
----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 10
    
    + (this += n) {
        a += n
    }
}

+ main() {
    thing = Thing()
    thing += 1
    -- thing.a
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

11

----------------------------------------------------------------------------------------------------
# Incremental operator on a property of a member

+ Member {
    + a = 10
    
    + (this += n) {
        a += n
    }
}

+ Thing {
    + member = Member()
}

+ main() {
    thing = Thing()
    thing.member += 1
    -- thing.member.a
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

11

====================================================================================================
Prefix operators.
====================================================================================================
----------------------------------------------------------------------------------------------------
# Incremental operator on a property of a member

+ Thing {
    + (!this) {
        = true
    }
}

+ main() {
    thing = Thing()
    -- !thing
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

-1

----------------------------------------------------------------------------------------------------

+ Thing {
    + (!this) {
        = 2
    }
}

+ main() {
    thing = Thing()
    -- !thing
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Exception: Operator must return Bool
<no file>, line 9
        -- !thing
           ^

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 5
    
    + (-this) {
        neg = Thing()
        neg.a = -a
        = neg
    }
}

+ main() {
    thing = Thing()
    nthing = -thing
    -- nthing.a
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

-5

----------------------------------------------------------------------------------------------------

+ Thing {
    + (in this) {
        = 5
    }
}

+ main() {
    thing = Thing()
    -- in thing
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

5

====================================================================================================
Index operators.
====================================================================================================
----------------------------------------------------------------------------------------------------

+ Thing {
    + ([index]) {
        = index + 5
    }
}

+ main() {
    thing = Thing()
    -- thing[10]
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

15

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 10
    
    + ([index] = value) {
        a = index + value
    }
}

+ main() {
    thing = Thing()
    thing[10] = 5
    -- thing.a
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

15

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 10
    
    + (-= [index]) {
        a -= index
    }
}

+ main() {
    thing = Thing()
    -= thing[1]
    -- thing.a
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

9

====================================================================================================
Index operators.
====================================================================================================
----------------------------------------------------------------------------------------------------

+ Thing {
    + ([g to h by i]) {
        = g + h + i
    }
}

+ main() {
    thing = Thing()
    -- thing[10 to 100 by 1]
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

111

----------------------------------------------------------------------------------------------------

+ Thing {
    + ([g to h by i=1]) {
        = g + h + i
    }
}

+ main() {
    thing = Thing()
    -- thing[10 to 100]
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

111

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 10
    
    + ([g to h by i] = value) {
        a = g + h + i + value
    }
}

+ main() {
    thing = Thing()
    thing[10 to 100 by 1] = 5
    -- thing.a
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

116

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 10
    
    + ([g to h by i=1] = value) {
        a = g + h + i + value
    }
}

+ main() {
    thing = Thing()
    thing[10 to 100] = 5
    -- thing.a
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

116

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 10
    
    + (-= [g to h by i]) {
        a -= g + h + i
    }
}

+ main() {
    thing = Thing()
    -= thing[10 to 100 by 1]
    -- thing.a
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

-101

====================================================================================================
Lookup operators.
====================================================================================================
----------------------------------------------------------------------------------------------------

+ Thing {
    + (.[key]) {
        = "found %key"
    }
}

+ main() {
    thing = Thing()
    -- thing.["foo"]
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

found foo

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = "nada"
    
    + (.[key] = value) {
        a = "got %key = %value"
    }
}

+ main() {
    thing = Thing()
    thing.["foo"] = "bar"
    -- thing.a
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

got foo = bar

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = "nada"
    
    + (-= .[key]) {
        a = "removed %key"
    }
}

+ main() {
    thing = Thing()
    -= thing.["foo"]
    -- thing.a
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

removed foo

----------------------------------------------------------------------------------------------------
