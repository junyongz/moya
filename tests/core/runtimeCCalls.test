----------------------------------------------------------------------------------------------------

fn = C" void nosuchthing()
-- not fn

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

true

----------------------------------------------------------------------------------------------------

fn = C" int strlen()
-- not fn

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

false

----------------------------------------------------------------------------------------------------

fn = C" void ctest1()
-- fn()

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received!
undefined

----------------------------------------------------------------------------------------------------

fn = C" void ctest2(int)
fn(42)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 42

----------------------------------------------------------------------------------------------------

fn = C" void ctest2(int)
fn(true)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 1

----------------------------------------------------------------------------------------------------

fn = C" void ctest2(int)
fn(false)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 0

----------------------------------------------------------------------------------------------------

fn = C" void ctest2(int)
fn("42")

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 42

----------------------------------------------------------------------------------------------------

fn = C" void ctest2(int)
fn(Object())

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Exception: Can't convert object to integer
<no file>, line 2, in <source>

----------------------------------------------------------------------------------------------------

fn = C" void ctest2(long)
fn(42)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 42

----------------------------------------------------------------------------------------------------

fn = C" void ctest2(long)
fn(Object())

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Exception: Can't convert object to integer
<no file>, line 2, in <source>

----------------------------------------------------------------------------------------------------

fn = C" void ctest2b(char)
fn("a")

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received a

----------------------------------------------------------------------------------------------------

fn = C" void ctest2(char)
fn(42)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 42

----------------------------------------------------------------------------------------------------

fn = C" void ctest2(bool)
fn(true)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 1

----------------------------------------------------------------------------------------------------

fn = C" void ctest3(double)
fn(42.5)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 42.5

----------------------------------------------------------------------------------------------------

fn = C" void ctest3(double)
fn(true)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 1

----------------------------------------------------------------------------------------------------

fn = C" void ctest3(double)
fn("42.5")

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 42.5

----------------------------------------------------------------------------------------------------

fn = C" void ctest4(long long)
fn(9223372036854775807L)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 9223372036854775807

----------------------------------------------------------------------------------------------------

fn = C" void ctest5(char*)
fn("hello")

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received hello

----------------------------------------------------------------------------------------------------

fn = C" int ctest6()
-- fn()

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42

----------------------------------------------------------------------------------------------------

fn = C" long long ctest7()
-- fn()

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

9223372036854775807L

----------------------------------------------------------------------------------------------------

fn = C" double ctest8()
-- fn()

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42.5

----------------------------------------------------------------------------------------------------

fn = C" char* ctest9()
-- fn()

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

hello

----------------------------------------------------------------------------------------------------

fn = C" UpObject* ctest10(UpObject*)
-- fn(Object())

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Object Object>

----------------------------------------------------------------------------------------------------

fn1 = C" FakeType* ctest11()
fn2 = C" void ctest12(FakeType*)

a = fn1()
fn2(a)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42

----------------------------------------------------------------------------------------------------
# Multiple arguemnts

fn = C" void ctest13(UpObject*, const char*)
fn(Object(), "foo")

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Object
foo

----------------------------------------------------------------------------------------------------
# Multiple arguemnts with one missing

fn = C" void ctest13(UpObject*, const char*)
fn(Object())

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Object
(null)

----------------------------------------------------------------------------------------------------
# Multiple arguemnts with one extra

fn = C" void ctest13(UpObject*, const char*)
fn(Object(), "foo", "bar")

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Object
foo

----------------------------------------------------------------------------------------------------
# Returning null from C to string

fn = C" char* ctest14()
called = fn()
-- " \"%called\"

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

""

----------------------------------------------------------------------------------------------------

C"void ctest2(int)

ctest2(42)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 42

----------------------------------------------------------------------------------------------------

C"
    void ctest2(int);
    void ctest3(double);

ctest2(42)
ctest3(42.5)

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

received 42
received 42.5

----------------------------------------------------------------------------------------------------
