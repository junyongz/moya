====================================================================================================
# Iterators

====================================================================================================
----------------------------------------------------------------------------------------------------

* a {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
    </left>
    <Id name="c"/>
</Iterator>

----------------------------------------------------------------------------------------------------

* a in b {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
    </left>
    <iterable>
        <Id name="b"/>
    </iterable>
    <Id name="c"/>
</Iterator>

----------------------------------------------------------------------------------------------------

* a -> {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Function>
    <Argument name="iterable"/>
    <Iterator>
        <left>
            <Id name="a"/>
        </left>
        <iterable>
            <Id name="iterable"/>
        </iterable>
        <Id name="c"/>
    </Iterator>
</Function>

----------------------------------------------------------------------------------------------------

* a -> c

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Function>
    <Argument name="iterable"/>
    <Iterator>
        <left>
            <Id name="a"/>
        </left>
        <iterable>
            <Id name="iterable"/>
        </iterable>
        <Id name="c"/>
    </Iterator>
</Function>

----------------------------------------------------------------------------------------------------

* a in b -> {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
    </left>
    <iterable>
        <Id name="b"/>
    </iterable>
    <Id name="c"/>
</Iterator>

----------------------------------------------------------------------------------------------------

* a in b -> c

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
    </left>
    <iterable>
        <Id name="b"/>
    </iterable>
    <Id name="c"/>
</Iterator>

====================================================================================================
With type annotations.
====================================================================================================
----------------------------------------------------------------------------------------------------

* a:T in b {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <TypeAssignment name="a">
            <TypeId name="T"/>
        </TypeAssignment>
    </left>
    <iterable>
        <Id name="b"/>
    </iterable>
    <Id name="c"/>
</Iterator>

----------------------------------------------------------------------------------------------------

* a:T,b:T in c {
    d
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <TypeAssignment name="a">
            <TypeId name="T"/>
        </TypeAssignment>
        <TypeAssignment name="b">
            <TypeId name="T"/>
        </TypeAssignment>
    </left>
    <iterable>
        <Id name="c"/>
    </iterable>
    <Id name="d"/>
</Iterator>

====================================================================================================
If clauses
====================================================================================================
----------------------------------------------------------------------------------------------------

* a if b {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
    </left>
    <clause>
        <Id name="b"/>
    </clause>
    <Id name="c"/>
</Iterator>

----------------------------------------------------------------------------------------------------

* a in b if a {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
    </left>
    <iterable>
        <Id name="b"/>
    </iterable>
    <clause>
        <Id name="a"/>
    </clause>
    <Id name="c"/>
</Iterator>

----------------------------------------------------------------------------------------------------

* a in b if a -> c

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
    </left>
    <iterable>
        <Id name="b"/>
    </iterable>
    <clause>
        <Id name="a"/>
    </clause>
    <Id name="c"/>
</Iterator>

----------------------------------------------------------------------------------------------------

* a in b if a -> {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
    </left>
    <iterable>
        <Id name="b"/>
    </iterable>
    <clause>
        <Id name="a"/>
    </clause>
    <Id name="c"/>
</Iterator>

====================================================================================================
While clauses.
====================================================================================================
----------------------------------------------------------------------------------------------------

* a while b {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator while="true">
    <left>
        <Id name="a"/>
    </left>
    <clause>
        <Id name="b"/>
    </clause>
    <Id name="c"/>
</Iterator>

----------------------------------------------------------------------------------------------------

* a in b while a {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator while="true">
    <left>
        <Id name="a"/>
    </left>
    <iterable>
        <Id name="b"/>
    </iterable>
    <clause>
        <Id name="a"/>
    </clause>
    <Id name="c"/>
</Iterator>

====================================================================================================
With multiple variables.
====================================================================================================
----------------------------------------------------------------------------------------------------

* a,b in b {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
        <Id name="b"/>
    </left>
    <iterable>
        <Id name="b"/>
    </iterable>
    <Id name="c"/>
</Iterator>

----------------------------------------------------------------------------------------------------

* a,b in c if a {
    _
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
        <Id name="b"/>
    </left>
    <iterable>
        <Id name="c"/>
    </iterable>
    <clause>
        <Id name="a"/>
    </clause>
    <Id name="null"/>
</Iterator>

----------------------------------------------------------------------------------------------------

* a,x in b -> {
    c
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
        <Id name="x"/>
    </left>
    <iterable>
        <Id name="b"/>
    </iterable>
    <Id name="c"/>
</Iterator>

----------------------------------------------------------------------------------------------------

* a,x -> b

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Function>
    <Argument name="iterable"/>
    <Iterator>
        <left>
            <Id name="a"/>
            <Id name="x"/>
        </left>
        <iterable>
            <Id name="iterable"/>
        </iterable>
        <Id name="b"/>
    </Iterator>
</Function>

----------------------------------------------------------------------------------------------------

* a,x if a -> b

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Function>
    <Argument name="iterable"/>
    <Iterator>
        <left>
            <Id name="a"/>
            <Id name="x"/>
        </left>
        <iterable>
            <Id name="iterable"/>
        </iterable>
        <clause>
            <Id name="a"/>
        </clause>
        <Id name="b"/>
    </Iterator>
</Function>

----------------------------------------------------------------------------------------------------

* a,x -> {
    b
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Function>
    <Argument name="iterable"/>
    <Iterator>
        <left>
            <Id name="a"/>
            <Id name="x"/>
        </left>
        <iterable>
            <Id name="iterable"/>
        </iterable>
        <Id name="b"/>
    </Iterator>
</Function>

----------------------------------------------------------------------------------------------------

* a,x if a -> {
    b
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Function>
    <Argument name="iterable"/>
    <Iterator>
        <left>
            <Id name="a"/>
            <Id name="x"/>
        </left>
        <iterable>
            <Id name="iterable"/>
        </iterable>
        <clause>
            <Id name="a"/>
        </clause>
        <Id name="b"/>
    </Iterator>
</Function>

----------------------------------------------------------------------------------------------------

* a,x in b -> c

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

<Iterator>
    <left>
        <Id name="a"/>
        <Id name="x"/>
    </left>
    <iterable>
        <Id name="b"/>
    </iterable>
    <Id name="c"/>
</Iterator>

----------------------------------------------------------------------------------------------------
