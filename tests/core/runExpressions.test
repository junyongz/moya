----------------------------------------------------------------------------------------------------

+ Thing {
    + count = 0
    
    + This(c) {
        count = c
    }
    
    + with(n) {
        = Thing(count - n)
    }
}

+ expr() {
    = {
        Thing(10)
        2
        5
    }
}

do {
    -- expr().count
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

3

----------------------------------------------------------------------------------------------------

+ foo(a) {
    = a * 2
}

do {
    -- foo(a) where {
        a = 5
    }
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

10

----------------------------------------------------------------------------------------------------

+ foo(a) {
    = a * 2
}

do {
    x = foo(a) where {
        a = 5
    }
    -- x
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

10

----------------------------------------------------------------------------------------------------

+ foo(a) {
    = a * 2
}

do {
    x = foo(a) where a = 5
    -- x
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

10

----------------------------------------------------------------------------------------------------

+ foo(a) {
    = a * 2
}

do {
    -- foo {
        a
    } where {
        a = 5
    }
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

10

----------------------------------------------------------------------------------------------------

do {
    {
        -- "no"
    }
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Exception: Illegal expression
<no file>, line 3
            -- "no"
            ^^^^^^^

----------------------------------------------------------------------------------------------------

do {
    {
        while {
        }
    }
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Exception: Illegal expression
<no file>, line 3
            while {
            ^^^^^^^

----------------------------------------------------------------------------------------------------

do {
    x = {
        throw 42
    }
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Exception: Illegal expression
<no file>, line 3
            throw 42
            ^^^^^^^^

----------------------------------------------------------------------------------------------------

do {
    x = {
        a = 1
    }
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Exception: Illegal expression
<no file>, line 3
            a = 1
            ^^^^^

----------------------------------------------------------------------------------------------------
