----------------------------------------------------------------------------------------------------

+ Thing {
    + foo(x) {
        -- "foo%x"
    }

    + bar(x) {
        -- "bar%x"
    }
}

do {
    thing = Thing()
    thing.foo(5)
    thing.bar(5)
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

foo5
bar5

----------------------------------------------------------------------------------------------------
# Infer return value of method call

+ Thing {
    + foo() {
        = plop()
    }

    + plop() {
        = 42
    }
}

do {
    thing = Thing()
    -- thing.foo()
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42

----------------------------------------------------------------------------------------------------
# Infer return value of method call

+ Thing {
    + foo() {
        = 42
    }
}

+ plop() {
    thing = Thing()
    = thing.foo()
}

do {
    -- plop()
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42

----------------------------------------------------------------------------------------------------

+ Thing {
}

do {
    thing = Thing()
    = thing.foo()
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

Exception: Function not found
<no file>, line 6
        = thing.foo()
          ^^^^^^^^^^^

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 42

    + foo() {
        -- a
    }
}

do {
    thing = Thing()
    thing.foo()
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 42

    + foo() {
        -- this.a
    }
}

do {
    thing = Thing()
    thing.foo()
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 42

    + foo() {
        bar()
    }

    + bar() {
        -- a
    }
}

do {
    thing = Thing()
    thing.foo()
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42

----------------------------------------------------------------------------------------------------

+ Thing {
    + a = 42

    + foo() {
        this.bar()
    }

    + bar() {
        -- a
    }
}

do {
    thing = Thing()
    thing.foo()
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42

----------------------------------------------------------------------------------------------------

+ Bling {
    + a = 42
    
    + foo() {
        -- a
    }
}

+ Thing {
    + bling = Bling()
}

do {
    thing = Thing()
    thing.bling.foo()
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42

----------------------------------------------------------------------------------------------------
# Method takes precedence over static function

+ bar() {
    --1
}

+ Thing {
    + foo() {
        bar()
    }
    
    + bar() {
        -- 2
    }
}

do {
    thing = Thing()
    thing.foo()
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

2

----------------------------------------------------------------------------------------------------
# Static function and method with same name but different arguments can be called

+ bar() {
    --1
}

+ Thing {
    + foo() {
        bar()
        bar(0)
    }
    
    + bar(x) {
        -- 2
    }
}

do {
    thing = Thing()
    thing.foo()
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

1
2

----------------------------------------------------------------------------------------------------
# Method with type variables

+ Thing {
    + foo\T(x:T) {
        -- x
    }
}

do {
    thing = Thing()
    thing.foo(42.5)
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42.500000

----------------------------------------------------------------------------------------------------
# Method with type variables

+ Thing\T {
    + foo\G(x, y:G) {
        -- x + y
    }
}

do {
    thing = Thing\Double()
    thing.foo(5, 42.5)
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

47.500000

----------------------------------------------------------------------------------------------------
# Method with type variables

+ Thing\T {
    + foo(x:T) {
        -- x
    }
}

do {
    thing = Thing\Double()
    thing.foo(42.5)
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

42.500000

----------------------------------------------------------------------------------------------------

+ Thing {
    + foo(a:Int32, b:Int32=25) {
        -- a
        -- b
    }
}

do {
    thing = Thing()
    thing.foo(24)
    thing.foo(24, 26)
}

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

24
25
24
26

----------------------------------------------------------------------------------------------------
